(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{78007:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>v});var t=s(95155),r=s(12115),i=s(6874),l=s.n(i),n=s(35695),o=s(83029),c=s(85339),d=s(28883),h=s(32919),m=s(78749),u=s(92657),x=s(20470),g=s(97168),y=s(88482),p=s(89852),b=s(82714),j=s(14503),N=s(50395),f=s(49026);function v(){let[e,a]=(0,r.useState)(""),[s,i]=(0,r.useState)(""),[v,w]=(0,r.useState)(!1),[k,S]=(0,r.useState)(!1),[A,P]=(0,r.useState)(""),{signIn:F,signInWithGoogle:L}=(0,N.A)(),{toast:z}=(0,j.dj)(),C=(0,n.useRouter)();(0,n.useSearchParams)().get("redirect");let _=async a=>{a.preventDefault(),S(!0),P("");try{let a=await F(e,s);z({title:"Login successful",description:"Welcome back, ".concat(a.displayName||a.email,"!")}),"manager"===a.role?C.push("/manager"):C.push("/worker")}catch(e){console.error("Login error:",e),P(e.message)}finally{S(!1)}},E=async()=>{try{S(!0),P("");let e=await L();z({title:"Login successful",description:"Welcome, ".concat(e.displayName||e.email,"!")}),"manager"===e.role?C.push("/manager"):C.push("/worker")}catch(e){console.error("Google sign-in error:",e),"Role is required for new users"===e.message?C.push("/signup/role?provider=google"):e.message.includes("auth/unauthorized-domain")?P("This domain is not authorized for authentication. Please add it to your Firebase Auth settings."):P(e.message)}finally{S(!1)}};return(0,t.jsx)("div",{className:"flex min-h-screen flex-col items-center justify-center bg-gradient-to-b from-gray-900 to-black p-4",children:(0,t.jsxs)(x.P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md",children:[(0,t.jsxs)("div",{className:"mb-8 text-center",children:[(0,t.jsx)(x.P.h1,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2,duration:.5},className:"text-4xl font-bold text-white tracking-tight",children:"Time Tracking System"}),(0,t.jsx)(x.P.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3,duration:.5},className:"text-gray-400 mt-2",children:"Location-based time tracking for care workers"})]}),(0,t.jsx)(x.P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.4,duration:.5},children:(0,t.jsxs)(y.Zp,{className:"border-gray-800 bg-gray-900/50 backdrop-blur-sm shadow-xl",children:[(0,t.jsxs)(y.aR,{className:"space-y-1",children:[(0,t.jsx)(y.ZB,{className:"text-2xl font-bold text-white",children:"Login"}),(0,t.jsx)(y.BT,{className:"text-gray-400",children:"Enter your credentials to access your account"})]}),A&&(0,t.jsx)("div",{className:"px-6",children:(0,t.jsxs)(f.Fc,{variant:"destructive",className:"bg-red-900/30 border-red-800 text-red-300",children:[(0,t.jsx)(c.A,{className:"h-4 w-4"}),(0,t.jsx)(f.TN,{children:A})]})}),(0,t.jsx)("form",{onSubmit:_,children:(0,t.jsxs)(y.Wu,{className:"space-y-4 pt-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(b.J,{htmlFor:"email",className:"text-gray-300",children:"Email"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(d.A,{className:"absolute left-3 top-3 h-4 w-4 text-gray-500"}),(0,t.jsx)(p.p,{id:"email",type:"email",placeholder:"name@example.com",value:e,onChange:e=>a(e.target.value),className:"pl-10 bg-gray-800/50 border-gray-700 text-white placeholder:text-gray-500 focus:border-blue-600",required:!0})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(b.J,{htmlFor:"password",className:"text-gray-300",children:"Password"}),(0,t.jsx)(l(),{href:"/forgot-password",className:"text-xs text-blue-500 hover:text-blue-400 hover:underline",children:"Forgot password?"})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(h.A,{className:"absolute left-3 top-3 h-4 w-4 text-gray-500"}),(0,t.jsx)(p.p,{id:"password",type:v?"text":"password",value:s,onChange:e=>i(e.target.value),className:"pl-10 pr-10 bg-gray-800/50 border-gray-700 text-white placeholder:text-gray-500 focus:border-blue-600",required:!0}),(0,t.jsxs)(g.$,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-10 w-10 text-gray-500 hover:text-white",onClick:()=>w(!v),children:[v?(0,t.jsx)(m.A,{className:"h-4 w-4"}):(0,t.jsx)(u.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:v?"Hide password":"Show password"})]})]})]}),(0,t.jsx)(g.$,{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 text-white",disabled:k,children:k?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}),"Logging in..."]}):"Login"}),(0,t.jsxs)("div",{className:"relative flex items-center justify-center",children:[(0,t.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,t.jsx)("div",{className:"w-full border-t border-gray-800"})}),(0,t.jsx)("div",{className:"relative bg-gray-900 px-4 text-sm text-gray-500",children:"Or continue with"})]}),(0,t.jsxs)(g.$,{type:"button",variant:"outline",className:"w-full border-gray-700 bg-gray-800/50 text-white hover:bg-gray-700 hover:text-white",onClick:E,disabled:k,children:[(0,t.jsx)(o.F4b,{className:"mr-2 h-5 w-5"}),"Google"]})]})}),(0,t.jsx)(y.wL,{className:"flex justify-center border-t border-gray-800 pt-4",children:(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:["Don't have an account?"," ",(0,t.jsx)(l(),{href:"/signup",className:"text-blue-500 hover:text-blue-400 hover:underline font-medium",children:"Sign up"})]})})]})}),A&&A.includes("auth/unauthorized-domain")&&(0,t.jsxs)(x.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6,duration:.5},className:"mt-6 p-4 bg-gray-800/50 rounded-lg border border-gray-700",children:[(0,t.jsx)("h3",{className:"text-white font-medium mb-2",children:"How to fix the unauthorized domain error:"}),(0,t.jsxs)("ol",{className:"list-decimal pl-5 text-gray-400 space-y-1 text-sm",children:[(0,t.jsxs)("li",{children:["Go to the"," ",(0,t.jsx)("a",{href:"https://console.firebase.google.com/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:"Firebase Console"})]}),(0,t.jsx)("li",{children:"Select your project"}),(0,t.jsx)("li",{children:"Go to Authentication > Settings > Authorized domains"}),(0,t.jsx)("li",{children:"Add your domain to the list of authorized domains"}),(0,t.jsx)("li",{children:"Save changes and try again"})]})]})]})})}},82749:(e,a,s)=>{Promise.resolve().then(s.bind(s,78007))}},e=>{var a=a=>e(e.s=a);e.O(0,[992,888,753,701,52,56,313,441,684,358],()=>a(82749)),_N_E=e.O()}]);